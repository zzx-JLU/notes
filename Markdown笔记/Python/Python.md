---
title: Python
chrome:
    format: "A4"
    headerTemplate: '<div></div>'
    footerTemplate: '<div style="width:100%; text-align:center; border-top: 1pt solid #eeeeee; margin: 10px 10px 20px; font-size: 8pt;">
    <span class=pageNumber></span> / <span class=totalPages></span></div>'
    displayHeaderFooter: true
    margin:
        top: '40px'
        bottom: '80px'
        left: '60px'
        right: '60px'
---

<h1>Python</h1>

<!-- @import "[TOC]" {cmd="toc" depthFrom=1 depthTo=6 orderedList=false} -->

<!-- code_chunk_output -->

- [1 Python入门](#1-python入门)
  - [1.1 Python基本语法](#11-python基本语法)
  - [1.2 变量和标识符](#12-变量和标识符)
  - [1.3 数据类型](#13-数据类型)
    - [1.3.1 数值](#131-数值)
      - [1.3.1.1 整数](#1311-整数)
      - [1.3.1.2 浮点数](#1312-浮点数)
    - [1.3.2 字符串](#132-字符串)
      - [1.3.2.1 字符串基础](#1321-字符串基础)
      - [1.3.2.2 格式化字符串](#1322-格式化字符串)
      - [1.3.2.3 字符串的运算](#1323-字符串的运算)
    - [1.3.3 布尔值](#133-布尔值)
    - [1.3.4 空值](#134-空值)
    - [1.3.5 类型检查](#135-类型检查)
  - [1.4 对象](#14-对象)
    - [1.4.1 对象的概念](#141-对象的概念)
    - [1.4.2 对象的结构](#142-对象的结构)
    - [1.4.3 变量与对象](#143-变量与对象)
  - [1.5 类型转换](#15-类型转换)
  - [1.6 运算符](#16-运算符)
    - [1.6.1 算术运算符](#161-算术运算符)
    - [1.6.2 赋值运算符](#162-赋值运算符)
    - [1.6.3 关系运算符](#163-关系运算符)
    - [1.6.4 逻辑运算符](#164-逻辑运算符)
    - [1.6.5 条件运算符](#165-条件运算符)
- [2 流程控制语句](#2-流程控制语句)
  - [2.1 `if`语句](#21-if语句)
  - [2.2 循环语句](#22-循环语句)

<!-- /code_chunk_output -->

# 1 Python入门

## 1.1 Python基本语法

1. 严格区分大小写。
2. 每一行就是一条语句，每条语句以换行符结束。
3. 一条语句可以分多行编写，行尾用`\`表示换行。
4. Python 是缩进严格的语言，不能随便添加缩进。
5. 使用`#`表示行注释，`#`后面的内容都属于注释，注释的内容会被解释器忽略。

## 1.2 变量和标识符

Python 中使用变量不需要声明，直接为变量赋值即可。

不能使用未赋值的变量，否则会报错。变量必须先赋值后使用。

Python 是动态类型语言，可以为变量赋任意类型的值，也可以任意修改变量的值。

标识符命名规则：

1. 标识符中可以含有字母、数字、下划线。
2. 只能以字母或下划线开头，不能以数字开头。
3. 不能是 Python 中的关键字和保留字。
4. 不建议使用内置函数名作为标识符，因为这样会导致函数被覆盖，无法再被调用。

标识符命名规范：

1. 下划线命名法：所有字母小写，单词之间用下划线分割。
2. 驼峰命名法：每个单词首字母大写，其余字母小写。

## 1.3 数据类型

### 1.3.1 数值

Python 中的数值分为 3 类：整数、浮点数、复数。

#### 1.3.1.1 整数

Python 中的整数为`int`类型。

Python 中整数的大小没有限制，整数可以无限大。如果数字的长度过大，可以使用下划线作为分隔符。

十进制整数不能以 0 开头，否则会报错。

二进制整数以`0b`开头，八进制整数以`0o`开头，十六进制整数以`0x`开头。

#### 1.3.1.2 浮点数

Python 中浮点数为`float`类型。

对浮点数进行运算时，可能得到不精确的结果。

### 1.3.2 字符串

#### 1.3.2.1 字符串基础

Python 中字符串为`str`类型。

Python 中字符串要用引号括起来。引号可以是双引号，也可以是单引号，但是单双引号不能混用。

相同的引号之间不能嵌套，双引号内部不能直接嵌套双引号。如果需要引号嵌套，应交替使用单双引号。

单引号和双引号不能跨行使用。如果字符串跨行，需要在每一行末尾添加`\`，而且不保留换行格式。

使用三重引号表示长字符串。三重引号可以跨行使用，并且会保留字符串中的格式（如换行等）。例如：

```python
'''
锄禾日当午，
汗滴禾下土。
谁知盘中餐，
粒粒皆辛苦。
'''
```

转义字符可以用来表示特殊字符。常见的转义字符如下表所示。

| 转义字符 | 含义 |
|:-------:|:----:|
| `\'` | 单引号 |
| `\"` | 双引号 |
| `\t` | 制表符 |
| `\n` | 换行符 |
| `\\` | 反斜杠 |
| `\u****` | Unicode 编码 |

#### 1.3.2.2 格式化字符串

在创建字符串时，可以在字符串中添加占位符，然后用其他值填充占位符。占位符用`%`引导，添加在字符串中。填充值也用`%`引导，跟在字符串后面。填充值多于一个时要加括号，多个填充值之间用逗号隔开，只有一个填充值时可以不加括号。

| 占位符 | 含义 |
|:--:|--|
| `%m.ns` | 字符串，最小长度为`m`，最大长度为`n`。长度不足时在左边补空格，长度过大时截取前`n`个字符。 |
| `%.nf` | 浮点数，默认 6 位小数。`n`指定小数位数，小数位数不足时补零，位数过大时四舍五入取`n`位小数。 |
| `%d` | 整数。如果填充值为浮点数，直接去掉小数部分，不进行四舍五入。 |

例如：

```python
'hello %s' % 'world'  # hello world
'%s = %f' % ('a', 12.3)  # a = 12.300000
'x = %d' % 12.9  # x = 12
```

可以在字符串前面添加`f`来创建格式化字符串，在格式化字符串中可以用大括号直接嵌入变量。例如：

```python
a = 123
b = 'abc'
print(f'hello {a} and {b}')  # hello 123 and abc
```

#### 1.3.2.3 字符串的运算

字符串之间可以相加，相当于拼接字符串。字符串只能和字符串相加，不能和其他类型值相加。例如：

```python
'abc' + '123'  # abc123
```

字符串可以和整数做乘法，如果是正整数，相当于将字符串重复若干次后得到新的字符串。例如：

```python
'abc' * 3  # abcabcabc
```

如果整数是 0 或负整数，与字符串相乘后得到的是空字符串。

### 1.3.3 布尔值

布尔值为`bool`类型，只有两种可能的取值：`True`表示真，`False`表示假。

布尔值属于整型，`True`相当于 1，`False`相当于 0。

### 1.3.4 空值

`None`为空值，表示不存在，其类型为`NoneType`。

### 1.3.5 类型检查

`type()`函数用于检查变量和值的类型，返回检查结果。例如：

```python
type(1)  # <class 'int'>
type(1.2)  # <class 'float'>
type('abc')  # <class 'str'>
type(True)  # <class 'bool'>
type(None)  # <class 'NoneType'>
```

## 1.4 对象

### 1.4.1 对象的概念

Python 是面向对象的语言，在 Python 中一切皆对象。

对象就是内存中专门用来存储指定数据的一块区域。

数值、字符串、布尔值、`None`都是对象。

### 1.4.2 对象的结构

每个对象中都要保存 3 种数据：

1. id：用来标识对象。
    - 每个对象都有唯一的 id。
    - 可以通过`id()`函数查看对象的 id。
    - id 是由解析器生成的，在 CPython 中，id 就是对象的内存地址。
    - 对象一旦创建，它的 id 就永远不能改变。
2. type：标识当前对象所属的类型。
    - 类型决定了对象具有哪些功能。
    - Python 是强类型语言，对象一旦创建，其类型就永远不能改变。
    - 可以通过`type()`函数查看对象的类型。
3. value：对象中存储的具体的数据。
    - 对象分成两类：可变对象、不可变对象。可变对象的值可以改变，不可变对象的值不可改变。
    - 数值、字符串、布尔值、`None`都是不可变对象。

### 1.4.3 变量与对象

对象并没有直接存储到变量中。变量中存储的不是对象的值，而是对象的 id。使用变量时，实际上是在通过 id 查找对象。

对变量重新赋值时，改变的是变量中保存的对象 id，也就是使变量指向另一个对象。这种指向关系只有在为对象重新赋值时才会改变。

给一个变量重新赋值时，不会影响其他变量。

## 1.5 类型转换

类型转换就是将一个类型的对象转换成其他类型的对象。

类型转换不是改变对象本身的类型，而是根据当前对象的值创建新的对象。

类型转换函数：

1. `int()`：将其他对象转换成`int`型。
    - 布尔值：`True`转换成 1，`False`转换成 0。
    - 浮点数：取整，舍去小数部分。
    - 字符串：合法的整数字符串直接转换成对应的数字。如果不是合法的整数字符串，则抛出`ValueError`异常。
    - 对于其他不可转换为整型的对象，抛出`TypeError`异常。
2. `float()`：将其他对象转换成`float`型。
3. `str()`：将其他对象转换成字符串。
    - 布尔值：`True`转换成`'True'`，`False`转换成`'False'`。
    - 数值：转换成对应的字符串。
4. `bool()`：将其他对象转换成布尔值。
    - 表示空性的对象转换为`False`，其他对象转换为`True`。
    - 转换为`False`的情况：整数 0、空字符串`''`、`None`

## 1.6 运算符

### 1.6.1 算术运算符

1. `+`：加法运算符
   - 两个数值做加法运算，运算规则与数学运算相同。
   - 两个字符串做加法运算，相当于将两个字符串拼接成一个字符串。
2. `-`：减法运算符
    - 两个数值做减法运算，运算规则与数学运算相同。
    - 字符串不能做减法运算。
3. `*`：乘法运算符
   - 两个数值做乘法运算，运算规则与数学运算相同。
   - 整数与字符串做乘法运算，相当于将字符串重复若干次。
4. `/`：除法运算符
   - 两个数值做除法运算，返回值总是浮点类型。
   - 除数不能为 0，否则将抛出`ZeroDivisionError`。
5. `//`：取整除运算符
   - 两个数值做除法运算，将运算结果向下取整。
   - 如果操作数中有浮点数，返回值也是浮点数。
6. `**`：幂运算符。
7. `%`：取余运算符。

### 1.6.2 赋值运算符

1. `=`：将右侧的值赋给左侧的变量
2. `+=`
3. `-=`
4. `*=`
5. `/=`
6. `**=`
7. `//=`
8. `%=`

### 1.6.3 关系运算符

关系运算符用来比较两个对象之间的关系，返回一个布尔值。关系成立则返回`True`，否则返回`False`。

1. `>`
2. `>=`
3. `<`
4. `<=`
5. `==`
6. `!=`

如果两个操作数都是数值，则比较它们的大小关系。

如果两个操作数都是字符串，则逐位比较每个字符的 Unicode 编码值。如果第一位相同，则继续比较第二位；如果第二位也相同，则继续比较第三位；以此类推，直至某一位能够区分大小，则直接返回结果，不再继续比较。

数值和字符串不能直接比较，会抛出`TypeError`异常。

`==`和`!=`比较的是对象的值，对象的`id`和`type`不参与比较。

`is`关键字用于比较两个对象的`id`，判断左右两侧是否为同一个对象。如果两个对象的`id`相同则返回`True`，不同则返回`False`。

`is not`与`is`相反，如果两个对象的`id`不同则返回`True`，相同则返回`False`。

Python 中关系运算符可以连用，先计算每个关系运算符及其左右操作数的结果，再将所有结果做与运算。例如：

```python
print(1 < 2 < 3) # True，相当于 1 < 2 and 2 < 3
print(1 < 2 > 3 < 1) # False，相当于 1 < 2 and 2 > 3 and 3 < 1
```

### 1.6.4 逻辑运算符

1. `not`：逻辑非
2. `and`：逻辑与
3. `or`：逻辑或

如果操作数是布尔值，直接运算；如果操作数中有非布尔值，则先将其自动转换为布尔值，再进行运算。

对非布尔值进行`not`运算时，返回值为布尔值。

`and`和`or`运算具有短路特性：

- 在`and`运算中，如果左操作数为`False`，则直接返回左操作数，不再计算右操作数；如果左操作数为`True`，则直接返回右操作数。
- 在`or`运算中，如果左操作数为`True`，则直接返回左操作数，不再计算右操作数；如果左操作数为`False`，则直接返回右操作数。

### 1.6.5 条件运算符

语法：

```python
语句1 if 条件表达式 else 语句2
```

含义：对条件表达式的值进行判断，如果为`True`，则执行语句 1，并返回语句 1 的结果；如果为`False`，则执行语句 2，并返回语句 2 的结果。

# 2 流程控制语句

## 2.1 `if`语句

语法：

```python
if 条件表达式: 语句

if 条件表达式:
    代码块

if 条件表达式:
    代码块
else:
    代码块

if 条件表达式:
    代码块
elif 条件表达式:
    代码块
elif 条件表达式:
    代码块
......
elif 条件表达式:
    代码块
else:
    代码块
```

代码块以缩进开始，直到代码恢复到之前的缩进级别时结束。代码块中可以包含多行代码，同一个代码块中多行代码缩进级别相同。

缩进有两种方式，一种是用 Tab，另一种是用 4 个空格。Python 官方文档中推荐使用空格。无论使用哪一种，代码中的缩进方式必须统一，不能混用。

代码块可以嵌套，每增加一个缩进级别，代码块就低一级。

## 2.2 循环语句

`while`语句：

```python
while 条件表达式:
    代码块

while 条件表达式:
    代码块
else:
    代码块 # 当条件为 False 时，执行一次
```
