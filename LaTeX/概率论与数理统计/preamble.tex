\documentclass[12pt, a4paper, oneside]{ctexbook}
\usepackage{amsmath, amsthm, amssymb, bm, graphicx, mathrsfs, color, framed, bookmark, caption, geometry, enumitem, subfigure, tikz, pgfplots, float, wrapfig, extpfeil}
\usepackage{hyperref} % 该宏包可能与其他宏包冲突，故放在所有引用的宏包之后

\usetikzlibrary{arrows.meta, decorations, calligraphy, quotes, angles, patterns}
\pgfplotsset{compat=1.18}

% 设置页边距
\geometry{a4paper, left=2cm, right=2cm, top=3cm, bottom=3cm}

\title{\Huge{\textbf{概率论与数理统计}}} % 标题
\author{ZZX-JLU} % 作者
\date{\today} % 日期
\linespread{1.5}

% 设置章节标题的格式
\ctexset{
    chapter = {
        name = {,},
        number = \arabic{chapter}
    },
    subsubsection = {
        name = {,},
        number = \arabic{subsubsection}
    }
}

\setcounter{secnumdepth}{3}

% 文章所用图片在当前目录下的 Figures 目录
\graphicspath{{Figures/}}

% 对目录生成链接
\hypersetup{
    colorlinks = true, % 链接文字带颜色
    linkcolor = black, % 链接文字为黑色
    citecolor = black, % 引用颜色为黑色
    bookmarksopen = true, % 展开书签
    bookmarksnumbered = true, % 书签带章节编号
}

% 列表环境的格式
\setenumerate[1]{itemsep=0pt, partopsep=0pt, parsep=\parskip, topsep=0pt, left=2em}
\setitemize[1]{itemsep=0pt, partopsep=0pt, parsep=\parskip, topsep=0pt, left=2em}
\setdescription{itemsep=0pt, partopsep=0pt, parsep=\parskip, topsep=0pt}

% 公式编号的样式
\renewcommand{\theequation}{\arabic{chapter}-\arabic{equation}}

% tikz 图形样式定义
\tikzset{
    % 空心圆点
    dot/.style = {
        draw,
        fill = white,
        circle,
        inner sep = 0pt,
        minimum size = 4pt,
    }
}

\captionsetup[table]{labelsep=quad} % 表格标题的分隔符
\captionsetup[figure]{labelsep=quad} % 图片标题的分隔符

% shaded 环境的背景颜色
\definecolor{shadecolor}{RGB}{231, 231, 231}

% 定理环境
\newcounter{theoremname}[chapter] % 定理计数器
\renewcommand{\thetheoremname}{\arabic{chapter}.\arabic{theoremname}}
\newenvironment{theorem}[1][]{
    \begin{framed}
        \refstepcounter{theoremname}
        \par\noindent
        \textbf{定理\thetheoremname}#1\quad}
{\end{framed}\par}

% 推论环境
\newcounter{corollaryname}[chapter] % 推论计数器
\renewcommand{\thecorollaryname}{\arabic{chapter}.\arabic{corollaryname}}
\newenvironment{corollary}[1][]{
    \begin{framed}
        \refstepcounter{corollaryname}
        \par\noindent
        \textbf{推论\thecorollaryname}#1\quad}
{\end{framed}\par}

% 引理环境
\newcounter{lemmaname}[chapter] % 引理计数器
\renewcommand{\thelemmaname}{\arabic{chapter}.\arabic{lemmaname}}
\newenvironment{lemma}[1][]{
    \begin{framed}
        \refstepcounter{lemmaname}
        \par\noindent
        \textbf{引理\thelemmaname}#1\quad}
{\end{framed}\par}

% 性质环境
\newcounter{propertyname} % 性质计数器
\newenvironment{property}[1][]{
    \begin{framed}
        \refstepcounter{propertyname}
        \par\noindent
        \textbf{性质\arabic{propertyname}}#1\quad}
{\end{framed}\par}

% 定义环境
\newcounter{definitionname}[chapter] % 定义计数器
\renewcommand{\thedefinitionname}{\arabic{chapter}.\arabic{definitionname}}
\newenvironment{definition}[1][]{
    \begin{framed}
        \refstepcounter{definitionname}
        \par\noindent
        \textbf{定义\thedefinitionname}#1\quad}
{\end{framed}\par}

% 例题环境
\newcounter{problemname}[chapter] % 例题计数器
\renewcommand{\theproblemname}{\arabic{chapter}.\arabic{problemname}}
\newenvironment{problem}[1][]{
    \vspace{1em}
    \refstepcounter{problemname}
    \par\noindent
    【\textbf{例\theproblemname}】#1\quad}
{\par}

% 题解环境
\newenvironment{solution}{\begin{shaded}\par\noindent\textbf{解：}}{\end{shaded}\par}

% 证明环境
\newenvironment{myproof}{\begin{shaded}\par\noindent\textbf{证明：}}{\qed\end{shaded}\par}

% 注记环境
\newenvironment{note}{\begin{shaded}\par\noindent\textbf{注：}}{\end{shaded}\par}

% 结论环境
\newenvironment{conclusion}{\begin{framed}\par\noindent\textbf{结论：}}{\end{framed}\par}